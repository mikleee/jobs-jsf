<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>

</h:head>

<h:body>

    <h:form>

        <h:panelGroup id="depListSection" style="display: inline-flex">

            <h:panelGroup style="display: inline-flex">

                <h:panelGroup>
                    <h:outputLabel value="Department List" for="depList"/>
                </h:panelGroup>

                <h:panelGroup>
                    <h:selectOneMenu id="depList" style="width: 200px">
                        <f:selectItem itemValue="0" itemLabel="select deprtmant"/>
                        <f:selectItems value="#{departmentList.departmentList}"/>
                        <f:ajax render="singleDepSection" listener="#{singleDepartment.showDepartmentInfo}"/>
                    </h:selectOneMenu>
                </h:panelGroup>

            </h:panelGroup>

            <h:panelGroup>

                <h:commandButton id="addDep" value="Add Department">
                    <f:ajax render="singleDepSection" listener="#{singleDepartment.showAddForm}"/>
                </h:commandButton>

            </h:panelGroup>

        </h:panelGroup>


        <h:panelGroup id="singleDepSection">

            <h:panelGroup rendered="#{singleDepartment.singleDepartment ne null}">

                <h:inputHidden id="depId" value="#{singleDepartment.singleDepartment.id}"/>

                <h:panelGrid id="singleDep" columns="2">

                    <f:facet name="header">
                        <h:outputText value="Department"/>
                    </f:facet>

                    <h:outputLabel for="depName" value="Name"/>
                    <h:inputText id="depName" value="#{singleDepartment.singleDepartment.name}" required="true"/>

                    <h:outputLabel for="depLocation" value="Location"/>
                    <h:inputText id="depLocation" value="#{singleDepartment.singleDepartment.location}"
                                 required="true"/>

                    <h:panelGroup rendered="#{singleDepartment.singleDepartment.employeeList ne null}">
                    <h:outputLabel value="Employee List" for="empList"/>
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:selectOneMenu id="empList"
                                         rendered="#{singleDepartment.singleDepartment.employeeList ne null}">
                        <f:selectItem itemValue="0" itemLabel="select employee"/>
                            <f:selectItems value="#{singleDepartment.employees}"/>
                        </h:selectOneMenu>
                    </h:panelGroup>

                    <f:facet name="footer">
                        <h:panelGroup>
                            <h:panelGroup>
                                <h:commandButton id="saveDep" value="Save Department">
                                    <f:ajax render="singleDepSection depList" execute="@form"
                                            listener="#{singleDepartment.saveDepartment(
                                            singleDepartment.singleDepartment.id,
                                            singleDepartment.singleDepartment.name,
                                            singleDepartment.singleDepartment.location)}"/>
                                </h:commandButton>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{singleDepartment.singleDepartment.id ne null}">
                                <h:commandButton id="delDep" value="Delete Department">
                                    <f:ajax render="singleDepSection depList" execute="@form"
                                            listener="#{singleDepartment.deleteDepartment(
                                            singleDepartment.singleDepartment.id)}"/>
                                </h:commandButton>
                            </h:panelGroup>
                        </h:panelGroup>
                    </f:facet>

                </h:panelGrid>

            </h:panelGroup>

        </h:panelGroup>

    </h:form>

</h:body>

</html>
